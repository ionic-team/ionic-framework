name: 'Test Core Clean Build'
description: 'Test Core Clean Build'
runs:
  using: 'composite'
  steps:
    - uses: actions/setup-node@v3
      with:
        node-version: 16.x

    - uses: ./.github/workflows/actions/download-archive
      with:
        name: ionic-core
        path: ./core
        filename: CoreBuild.zip
    - name: Check Diff
      run: |
        git diff --exit-code || {
          echo -e "\033[1;31mWarning: There is a diff between the build output from main and your branch.\033[0m"
          echo -e "\033[1;31mConfirm that you have run npm run build locally and pushed all expected changes to your branch.\033[0m"
          echo -e "\033[1;31mGit Diff Output:\033[0m"
          exit 1
        }
      shell: bash
      working-directory: ./core
