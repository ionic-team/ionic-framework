name: 'Test Core Clean Build'
description: 'Test Core Clean Build'
runs:
  using: 'composite'
  steps:
    - uses: actions/setup-node@v3
      with:
        node-version: 16.x

    - uses: ./.github/workflows/actions/download-archive
      with:
        name: ionic-core
        path: ./core
        filename: CoreBuild.zip
    - name: Check Diff
      run: |
        git diff --exit-code || {
          echo "There is a diff between the build output from main and your branch."
          echo "Confirm that you have run "npm run build" locally and pushed all expected changes to your branch."
          git diff
          exit 1
        }
      shell: bash
      working-directory: ./core
