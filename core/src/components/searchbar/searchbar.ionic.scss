@use "../../themes/ionic/ionic.globals.scss" as globals;
@use "searchbar.common";

// Ionic Searchbar
// --------------------------------------------------

:host {
  /**
   * @prop --focus-ring-color: The color of the ring around the focused element.
   * @prop --focus-ring-width: The width of the ring around the focused element.
   */
  --background: #{globals.$ion-primitives-neutral-100};
  --border-radius: #{globals.$ion-border-radius-400};
  --box-shadow: none;
  --cancel-button-color: #{globals.$ion-primitives-neutral-800};
  --clear-button-color: #{globals.$ion-primitives-neutral-1000};
  --color: #{globals.$ion-primitives-neutral-1200};
  --icon-color: #{globals.$ion-primitives-neutral-800};
  --placeholder-color: #{globals.$ion-primitives-neutral-800};
  --focus-ring-color: #{globals.$ion-border-focus-default};
  --focus-ring-width: #{globals.$ion-border-size-050};

  @include globals.typography(globals.$ion-body-md-regular);
  @include globals.padding(0);
}

// Searchbar Search Icon
// -----------------------------------------

.searchbar-search-icon {
  // Position is based on the size of the search icon.
  @include globals.position(globals.$ion-scale-400, null, null, globals.$ion-scale-400);

  width: globals.$ion-scale-400;
  height: globals.$ion-scale-400;
}

// Searchbar Input Field
// -----------------------------------------

.searchbar-input {
  /**
   * Padding start is based on
   * desired padding from design,
   * the size of the search icon,
   * and the gap between the icon and the input.
   *
   * Padding end is based on
   * desired padding from design,
   * the size of the clear icon,
   * and the gap between the icon and the input.
   */
  @include globals.padding(
    globals.$ion-space-300,
    calc(globals.$ion-space-400 + globals.$ion-scale-400 + globals.$ion-space-200),
    globals.$ion-space-300,
    calc(globals.$ion-space-400 + globals.$ion-scale-400 + globals.$ion-space-200)
  );

  min-height: globals.$ion-scale-1200;

  contain: strict;
}

// Searchbar Clear Input Icon
// -----------------------------------------

.searchbar-clear-button {
  // Position is based on the size of the clear icon.
  @include globals.position(globals.$ion-scale-400, globals.$ion-scale-400, null, null);

  width: globals.$ion-scale-400;
  height: globals.$ion-scale-400;

  background-color: transparent;

  font-size: globals.$ion-scale-400;

  contain: strict;
}

// Searchbar Cancel Icon
// -----------------------------------------

.searchbar-cancel-button {
  /**
   * The left edge of the cancel button
   * should align with the left edge
   * of the back button if the searchbar
   * is used in a toolbar.
   */
  @include globals.position(0, null, null, 9px);

  background-color: transparent;

  font-size: globals.$ion-font-size-400;
}

// Searchbar Search & Clear Icon & Cancel Icon
// -----------------------------------------

.searchbar-search-icon,
.searchbar-clear-button,
.searchbar-cancel-button {
  position: absolute;
}

// Clear Icon & Cancel Icon
// -----------------------------------------

.searchbar-clear-button:focus-visible,
.searchbar-cancel-button:focus-visible ion-icon {
  @include globals.border-radius(globals.$ion-border-radius-100);

  outline: globals.$ion-border-size-050 globals.$ion-border-style-solid globals.$ion-border-focus-default;

  opacity: 1;
}

// Searchbar in Toolbar
// -----------------------------------------

:host-context(ion-toolbar) {
  min-height: globals.$ion-scale-1200;
}

// Searchbar States
// --------------------------------------------------

/* Hover */
:host(:hover) {
  --background: #{globals.$ion-primitives-neutral-200};
}

/* Focus */
:host(.searchbar-has-focus) .searchbar-input {
  outline: var(--focus-ring-width) globals.$ion-border-style-solid var(--focus-ring-color);
}

:host(.searchbar-has-focus) .searchbar-search-icon,
:host(.searchbar-has-focus) .searchbar-cancel-button,
:host(.searchbar-should-show-cancel) .searchbar-cancel-button {
  display: block;
}

:host(.searchbar-has-focus) .searchbar-cancel-button + .searchbar-search-icon,
:host(.searchbar-should-show-cancel) .searchbar-cancel-button + .searchbar-search-icon {
  display: none;
}

/* Disabled */
:host(.searchbar-disabled) {
  --color: #{globals.$ion-primitives-neutral-500};
  --icon-color: #{globals.$ion-primitives-neutral-500};
  --placeholder-color: #{globals.$ion-primitives-neutral-500};

  cursor: default;
  pointer-events: none;
}

// Searchbar Shapes
// --------------------------------------------------

:host(.searchbar-shape-soft) {
  --border-radius: #{globals.$ion-border-radius-200};
}

:host(.searchbar-shape-round) {
  --border-radius: #{globals.$ion-border-radius-400};
}

:host(.searchbar-shape-rectangular) {
  --border-radius: #{globals.$ion-border-radius-0};
}
