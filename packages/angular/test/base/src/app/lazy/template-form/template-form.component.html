<ion-header>
  <ion-toolbar>
    <ion-title>Template-Driven Form Validation Test</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form #templateForm="ngForm" (ngSubmit)="onSubmit(templateForm)">
    <ion-list>
      <!-- Test ion-input with required validation -->
      <ion-item>
        <ion-input 
          label="Required Input" 
          [(ngModel)]="inputValue" 
          name="inputField"
          required
          #inputField="ngModel"
          id="template-input-test"
          errorText="This field is required"
          helperText="Enter some text">
        </ion-input>
      </ion-item>
      
      <!-- Display validation state for debugging -->
      <ion-item>
        <ion-label>
          <p>Input Touched: <span id="input-touched">{{inputField.touched}}</span></p>
          <p>Input Invalid: <span id="input-invalid">{{inputField.invalid}}</span></p>
          <p>Input Errors: <span id="input-errors">{{inputField.errors | json}}</span></p>
        </ion-label>
      </ion-item>

      <!-- Test ion-textarea with required validation -->
      <ion-item>
        <ion-textarea 
          label="Required Textarea" 
          [(ngModel)]="textareaValue" 
          name="textareaField"
          required
          #textareaField="ngModel"
          id="template-textarea-test"
          errorText="This field is required"
          helperText="Enter some text"
          rows="4">
        </ion-textarea>
      </ion-item>
      
      <!-- Display validation state for debugging -->
      <ion-item>
        <ion-label>
          <p>Textarea Touched: <span id="textarea-touched">{{textareaField.touched}}</span></p>
          <p>Textarea Invalid: <span id="textarea-invalid">{{textareaField.invalid}}</span></p>
          <p>Textarea Errors: <span id="textarea-errors">{{textareaField.errors | json}}</span></p>
        </ion-label>
      </ion-item>

      <!-- Additional test with minlength validation -->
      <ion-item>
        <ion-input 
          label="Min Length Input (3 chars)" 
          [(ngModel)]="minLengthValue" 
          name="minLengthField"
          required
          minlength="3"
          #minLengthField="ngModel"
          id="template-minlength-test"
          errorText="Minimum 3 characters required"
          helperText="Enter at least 3 characters">
        </ion-input>
      </ion-item>
      
      <!-- Display validation state for minlength field -->
      <ion-item>
        <ion-label>
          <p>MinLength Touched: <span id="minlength-touched">{{minLengthField.touched}}</span></p>
          <p>MinLength Invalid: <span id="minlength-invalid">{{minLengthField.invalid}}</span></p>
          <p>MinLength Errors: <span id="minlength-errors">{{minLengthField.errors | json}}</span></p>
        </ion-label>
      </ion-item>

      <!-- Test ion-select with required validation -->
      <ion-item>
        <ion-select
          label="Required Select"
          [(ngModel)]="selectValue"
          name="selectField"
          required
          #selectField="ngModel"
          id="template-select-test"
          errorText="This field is required"
          helperText="Select an option">
          <ion-select-option value="option1">Option 1</ion-select-option>
          <ion-select-option value="option2">Option 2</ion-select-option>
        </ion-select>
      </ion-item>

      <!-- Display validation state for debugging -->
      <ion-item>
        <ion-label>
          <p>Select Touched: <span id="select-touched">{{selectField.touched}}</span></p>
          <p>Select Invalid: <span id="select-invalid">{{selectField.invalid}}</span></p>
          <p>Select Errors: <span id="select-errors">{{selectField.errors | json}}</span></p>
        </ion-label>
      </ion-item>

      <!-- Test ion-checkbox with required validation -->
      <ion-item>
        <ion-checkbox
          [(ngModel)]="checkboxValue"
          name="checkboxField"
          required
          #checkboxField="ngModel"
          id="template-checkbox-test"
          helper-text="You must agree to continue"
          error-text="Please accept the terms and conditions"
        >
          I agree to the terms and conditions
        </ion-checkbox>
      </ion-item>

      <!-- Display validation state for debugging -->
      <ion-item>
        <ion-label>
          <p>Checkbox Touched: <span id="checkbox-touched">{{checkboxField.touched}}</span></p>
          <p>Checkbox Invalid: <span id="checkbox-invalid">{{checkboxField.invalid}}</span></p>
          <p>Checkbox Errors: <span id="checkbox-errors">{{checkboxField.errors | json}}</span></p>
        </ion-label>
      </ion-item>

      <!-- Test ion-toggle with required validation -->
      <ion-item>
        <ion-toggle
          [(ngModel)]="toggleValue"
          name="toggleField"
          required
          #toggleField="ngModel"
          id="template-toggle-test"
          helper-text="You must turn on to continue"
          error-text="Please turn on this toggle"
        >
          Tap to turn on
        </ion-toggle>
      </ion-item>

      <!-- Display validation state for debugging -->
      <ion-item>
        <ion-label>
          <p>Toggle Touched: <span id="toggle-touched">{{toggleField.touched}}</span></p>
          <p>Toggle Invalid: <span id="toggle-invalid">{{toggleField.invalid}}</span></p>
          <p>Toggle Errors: <span id="toggle-errors">{{toggleField.errors | json}}</span></p>
        </ion-label>
      </ion-item>

      <!-- Test ion-radio-group with required validation -->
        <ion-radio-group
          [(ngModel)]="radioGroupValue"
          name="radioGroupField"
          required
          #radioGroupField="ngModel"
          id="template-radio-group-test"
          helper-text="You must select one to continue"
          error-text="Please select a fruit"
          allow-empty-selection="true"
        >
          <ion-radio value="grapes">Grapes</ion-radio><br />
          <ion-radio value="strawberries">Strawberries</ion-radio>
        </ion-radio-group>
      </ion-item>

      <!-- Display validation state for debugging -->
      <ion-item>
        <ion-label>
          <p>Radio Group Touched: <span id="radio-group-touched">{{radioGroupField.touched}}</span></p>
          <p>Radio Group Invalid: <span id="radio-group-invalid">{{radioGroupField.invalid}}</span></p>
          <p>Radio Group Errors: <span id="radio-group-errors">{{radioGroupField.errors | json}}</span></p>
        </ion-label>
      </ion-item>
    </ion-list>

    <div class="ion-padding">
      <p>Form Valid: <span id="form-valid">{{templateForm.valid}}</span></p>
      <p>Form Submitted: <span id="form-submitted">{{submitted}}</span></p>
      
      <ion-button type="submit" id="submit-button" [disabled]="!templateForm.valid">
        Submit Form
      </ion-button>
      
      <ion-button type="button" id="reset-button" (click)="resetForm(templateForm)">
        Reset Form
      </ion-button>
      
      <ion-button type="button" id="touch-all-button" (click)="templateForm.form.markAllAsTouched()">
        Mark All as Touched
      </ion-button>
    </div>
    
    <div class="ion-padding">
      <h3>Form Values:</h3>
      <pre id="form-values">{{templateForm.value | json}}</pre>
    </div>
  </form>
  
  <div class="ion-padding">
    <h3>Instructions to reproduce issue:</h3>
    <ol>
      <li>Click in the "Required Input" field</li>
      <li>Click outside without entering text</li>
      <li>The field should show as touched and invalid</li>
      <li>The error text should appear below the input</li>
      <li>For screen readers, the validation state should be announced</li>
    </ol>
    <p><strong>Note:</strong> With template-driven forms, Angular applies validation classes to the wrapper element, not directly to ion-input/ion-textarea.</p>
  </div>
</ion-content>
